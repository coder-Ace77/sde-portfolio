# Blob Storage Patterns

---

Sometimes you'll need to store large, unstructured blobs of data. This could be images, videos, or other files. Storing these large blobs in a traditional database is both expensive and inefficient and should be avoided when possible. Instead, you should use a blob storage service like [Amazon S3](https://aws.amazon.com/pm/serv-s3/) or [Google Cloud Storage](https://cloud.google.com/storage). These platforms are specifically designed for handling large blobs of data, and are much more cost-effective than a traditional database.

Blob storage services are simple. You can upload a blob of data and that data is stored and get back a URL. You can then use this URL to download the blob of data. Often times blob storage services work in conjunction with CDNs, so you can get fast downloads from anywhere in the world. Upload a file/blob to blob storage which will act as your origin, and then use a CDN to cache the file/blob in edge locations around the world.

For designing youtube videos will be stored in blob and metadata in database. Similarly for instagram images and videos in blob storage and metadata in db.

![Alt](/img/Pasted_image_20251013110659.png)

### Uploading and downloading:

For uploading a user will first reqrust the service  the service has to do two things first create a url where information can be stored about blob of data. Second data has to be uploaded to the blob where the url in db should be matching with the url where client uploaded. Also this access should be temporary otherwise user will be able to upload anything to the db.

#### Presigned url:
It is a url which is an special type of url that allows user to do specific action to a resource iwthout needing authentication. It is temporary link that gives someone access to resource for some time. It is generated by the cloud provider itself.

Suppose user is uploading video -

At first the user will request the video to be uploaded. The server will give back presigned url back to the client url contains all the indformation required to be able to perform the actions it also encodes till when it will be usable aong with some unique token for authentication. User will now use this url to upload the video and server checks back if the url is correct if yes then youtube will move the resource and transaction will get complete.

- When clients want to upload a file, they request a presigned URL from the server.
- The server returns a presigned URL to the client, recording it in the database.
- The client uploads the file to the presigned URL.
- The blob storage triggers a notification to the server that the upload is complete and the status is updated.

To download:

- The client requests a specific file from the server and are returned a presigned URL.
- The client uses the presigned URL to download the file via the CDN, which proxies the request to the underlying blob storage.

Blob storage are highly durable meaning info is almost never lost due to replication. its highly scalable and cost effective than sotring in db.Blob storage services allow you to upload and download blobs directly from the client.

Usually the blob storage work in association with the end point caching strategies like cdn. CDN improves the latency for cached data reason being the video will harldy change ever so once cached we will get 100% cahce hit. Not only that CDN are closer to the end users so work better.
